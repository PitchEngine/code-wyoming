<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Tic-Tac-Toe!</title>
    <style>
        td{
            width:150px;
            height:150px;
            background-size:cover;
            background-origin:padding-box;
            margin:0;
        }
        tr.row1 td, tr.row2 td{
            border-bottom:1px solid black;
        }
        .col1, .col2{
            border-right:1px solid black;
        }
        td.x{
            background-image:url("x.png")
        }
        td.o{
            background-image:url("o.png");
        }
        table,tbody{
            overflow:auto;
            margin:50px auto;
        }
        th{
            text-transform: capitalize;
            position:fixed;
            top:0;
            left:0;right:0;
        }
        button{
            font-size:2em;
            background-image:linear-gradient(to bottom, #FEFEFE, #D0D0D0);
            border:1px solid #FFF;
        }
    </style>
</head>

<body>
    <table>
        <tbody>
            <tr>
                <th class="msg" colspan="3"></th>
            </tr>
            <tr class="row1">
                <td class="col1"></td>
                <td class="col2"></td>
                <td class="col3"></td>
            </tr>
            <tr class="row2">
                <td class="col1"></td>
                <td class="col2"></td>
                <td class="col3"></td>
            </tr>
            <tr class="row3">
                <td class="col1"></td>
                <td class="col2"></td>
                <td class="col3"></td>
            </tr>
        </tbody>
    </table>
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script>
        var $col1 = $('.col1'),
            $col2 = $('.col2'),
            $col3 = $('.col3');
        var $row1 = $(".row1").children(),
            $row2 = $(".row2").children(),
            $row3 = $(".row3").children();
        var $diag1 = $(".row1 .col1, .row2 .col2, .row3 .col3"),
            $diag2 = $(".row1 .col3, .row2 .col2, .row3 .col1");
        var winScenarios = [$row1, $row2, $row3, $col1, $col2, $col3, $diag1, $diag2]
        var $gameCells = $('td').click(doTurn).on('touchstart', doTurn);
        var oTurn = true;
        var gameOver = false;
        function doTurn(){
            $this = $(this);
            if(!($this.hasClass('o') || $this.hasClass('x')) && !gameOver){
                if(oTurn){
                    $this.addClass('o').removeClass('x');
                }
                else{
                    $this.removeClass('o').addClass('x');
                }
                oTurn = !oTurn;
                checkState();
            }
        }
        function checkState(){
            
            function checkThree(three){
                if(three.filter('.o').length == 3){
                    return 'o';
                }
                else if(three.filter('.x').length == 3){
                    return 'x';
                }else return false;
            }
            for(var i = 0; i< winScenarios.length; i++){
                var winner = checkThree(winScenarios[i]);
                if(winner){
                    gameDone(winner + " wins.");
                }
            }
            
            //board game filled
            if($gameCells.filter('.o, .x').length == 9){
                gameDone("Tie game.")
            }
        }
        function gameDone(msg){
            $newGameBtn = $("<button>NEW GAME</button>").click(reset);
            $('.msg').html(msg + "<br>").append($newGameBtn);
            gameOver = true;
        }
        function reset(){
            $gameCells.removeClass('o x');
            oTurn = true; 
            gameOver = false;
            $('.msg').html("");
        }
    </script>
</body>

</html>